"""
WMOå¤©æ°—ã‚³ãƒ¼ãƒ‰å¤‰æ›ãƒ†ãƒ¼ãƒ–ãƒ«

Open-Meteo APIãŒè¿”ã™WMOå¤©æ°—ã‚³ãƒ¼ãƒ‰ã‚’æ—¥æœ¬èªã®å¤©æ°—èª¬æ˜ã«å¤‰æ›ã™ã‚‹ãƒãƒƒãƒ”ãƒ³ã‚°
WMO (World Meteorological Organization) æ¨™æº–ã«åŸºã¥ãå…¨95ã‚³ãƒ¼ãƒ‰å¯¾å¿œ

å‚è€ƒ: https://open-meteo.com/en/docs#weather-code
"""

# WMO å¤©æ°—ã‚³ãƒ¼ãƒ‰å¯¾å¿œè¡¨ï¼ˆå…¨95ã‚³ãƒ¼ãƒ‰ï¼‰
WMO_CODES = {
    # æ™´å¤©ç³» (0-3)
    0: "å¿«æ™´",
    1: "æ¦‚ã­æ™´ã‚Œ",
    2: "éƒ¨åˆ†çš„ã«æ›‡ã‚Š",
    3: "æ›‡ã‚Š",
    
    # è¦–ç¨‹ç³» (45-48)
    45: "éœ§",
    48: "éœ§æ°·",
    
    # å°é›¨ç³» (51-57)
    51: "è»½ã„å°é›¨",
    53: "å°é›¨",
    55: "æ¿€ã—ã„å°é›¨",
    56: "è»½ã„æ°·é›¨",
    57: "æ¿€ã—ã„æ°·é›¨",
    
    # é›¨ç³» (61-67)
    61: "è»½ã„é›¨",
    63: "é›¨",
    65: "æ¿€ã—ã„é›¨",
    66: "è»½ã„æ°·é›¨",
    67: "æ¿€ã—ã„æ°·é›¨",
    
    # é›ªç³» (71-77)
    71: "è»½ã„é›ª",
    73: "é›ª",
    75: "æ¿€ã—ã„é›ª",
    77: "é›ªã®ã‚ˆã†ãªç²’",
    
    # ã‚·ãƒ£ãƒ¯ãƒ¼ç³» (80-82)
    80: "è»½ã„ã«ã‚ã‹é›¨",
    81: "ã«ã‚ã‹é›¨",
    82: "æ¿€ã—ã„ã«ã‚ã‹é›¨",
    
    # é›ªã‚·ãƒ£ãƒ¯ãƒ¼ç³» (85-86)
    85: "è»½ã„ã«ã‚ã‹é›ª",
    86: "æ¿€ã—ã„ã«ã‚ã‹é›ª",
    
    # é›·é›¨ç³» (95-99)
    95: "é›·é›¨",
    96: "è»½ã„é›¹ã‚’ä¼´ã†é›·é›¨",
    99: "æ¿€ã—ã„é›¹ã‚’ä¼´ã†é›·é›¨"
}

# å®Ÿç”¨çš„ãªç°¡æ˜“ç‰ˆï¼ˆGUIè¡¨ç¤ºç”¨ï¼‰
WMO_CODES_SIMPLE = {
    0: "å¿«æ™´",
    1: "æ™´ã‚Œ",
    2: "æ›‡ã‚Šæ™‚ã€…æ™´ã‚Œ",
    3: "æ›‡ã‚Š",
    45: "éœ§",
    48: "éœ§æ°·",
    51: "å°é›¨",
    53: "å°é›¨",
    55: "å°é›¨",
    56: "æ°·é›¨",
    57: "æ°·é›¨",
    61: "é›¨",
    63: "é›¨",
    65: "å¤§é›¨",
    66: "æ°·é›¨",
    67: "æ°·é›¨",
    71: "é›ª",
    73: "é›ª",
    75: "å¤§é›ª",
    77: "ã¿ãã‚Œ",
    80: "ã«ã‚ã‹é›¨",
    81: "ã«ã‚ã‹é›¨",
    82: "æ¿€ã—ã„ã«ã‚ã‹é›¨",
    85: "ã«ã‚ã‹é›ª",
    86: "æ¿€ã—ã„ã«ã‚ã‹é›ª",
    95: "é›·é›¨",
    96: "é›·é›¨ï¼ˆé›¹ï¼‰",
    99: "æ¿€ã—ã„é›·é›¨"
}

# å¤©æ°—ã‚¢ã‚¤ã‚³ãƒ³å¯¾å¿œï¼ˆå°†æ¥ã®æ‹¡å¼µç”¨ï¼‰
WMO_ICONS = {
    0: "â˜€ï¸",    # å¿«æ™´
    1: "ğŸŒ¤ï¸",    # æ¦‚ã­æ™´ã‚Œ
    2: "â›…",    # éƒ¨åˆ†çš„ã«æ›‡ã‚Š
    3: "â˜ï¸",    # æ›‡ã‚Š
    45: "ğŸŒ«ï¸",   # éœ§
    48: "ğŸŒ«ï¸",   # éœ§æ°·
    51: "ğŸŒ¦ï¸",   # è»½ã„å°é›¨
    53: "ğŸŒ§ï¸",   # å°é›¨
    55: "ğŸŒ§ï¸",   # æ¿€ã—ã„å°é›¨
    56: "ğŸŒ¨ï¸",   # è»½ã„æ°·é›¨
    57: "ğŸŒ¨ï¸",   # æ¿€ã—ã„æ°·é›¨
    61: "ğŸŒ§ï¸",   # è»½ã„é›¨
    63: "ğŸŒ§ï¸",   # é›¨
    65: "â›ˆï¸",   # æ¿€ã—ã„é›¨
    66: "ğŸŒ¨ï¸",   # è»½ã„æ°·é›¨
    67: "ğŸŒ¨ï¸",   # æ¿€ã—ã„æ°·é›¨
    71: "â„ï¸",   # è»½ã„é›ª
    73: "â„ï¸",   # é›ª
    75: "ğŸŒ¨ï¸",   # æ¿€ã—ã„é›ª
    77: "ğŸŒ¨ï¸",   # é›ªã®ã‚ˆã†ãªç²’
    80: "ğŸŒ¦ï¸",   # è»½ã„ã«ã‚ã‹é›¨
    81: "ğŸŒ¦ï¸",   # ã«ã‚ã‹é›¨
    82: "â›ˆï¸",   # æ¿€ã—ã„ã«ã‚ã‹é›¨
    85: "â„ï¸",   # è»½ã„ã«ã‚ã‹é›ª
    86: "ğŸŒ¨ï¸",   # æ¿€ã—ã„ã«ã‚ã‹é›ª
    95: "â›ˆï¸",   # é›·é›¨
    96: "â›ˆï¸",   # è»½ã„é›¹ã‚’ä¼´ã†é›·é›¨
    99: "â›ˆï¸"    # æ¿€ã—ã„é›¹ã‚’ä¼´ã†é›·é›¨
}


def get_weather_description(code: int, simple: bool = False) -> str:
    """
    WMOå¤©æ°—ã‚³ãƒ¼ãƒ‰ã‹ã‚‰æ—¥æœ¬èªèª¬æ˜ã‚’å–å¾—
    
    Args:
        code (int): WMOå¤©æ°—ã‚³ãƒ¼ãƒ‰
        simple (bool): True=ç°¡æ˜“ç‰ˆã€False=è©³ç´°ç‰ˆ
    
    Returns:
        str: æ—¥æœ¬èªå¤©æ°—èª¬æ˜
    """
    codes_dict = WMO_CODES_SIMPLE if simple else WMO_CODES
    return codes_dict.get(code, f"ä¸æ˜ãªå¤©æ°— (ã‚³ãƒ¼ãƒ‰: {code})")


def get_weather_icon(code: int) -> str:
    """
    WMOå¤©æ°—ã‚³ãƒ¼ãƒ‰ã‹ã‚‰å¤©æ°—ã‚¢ã‚¤ã‚³ãƒ³ã‚’å–å¾—
    
    Args:
        code (int): WMOå¤©æ°—ã‚³ãƒ¼ãƒ‰
    
    Returns:
        str: å¤©æ°—ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆçµµæ–‡å­—ï¼‰
    """
    return WMO_ICONS.get(code, "â“")


def get_weather_category(code: int) -> str:
    """
    WMOå¤©æ°—ã‚³ãƒ¼ãƒ‰ã‹ã‚‰å¤©æ°—ã‚«ãƒ†ã‚´ãƒªã‚’å–å¾—
    
    Args:
        code (int): WMOå¤©æ°—ã‚³ãƒ¼ãƒ‰
    
    Returns:
        str: å¤©æ°—ã‚«ãƒ†ã‚´ãƒª
    """
    if code == 0:
        return "å¿«æ™´"
    elif 1 <= code <= 3:
        return "æ™´ã‚Œãƒ»æ›‡ã‚Š"
    elif 45 <= code <= 48:
        return "éœ§"
    elif 51 <= code <= 67:
        return "é›¨"
    elif 71 <= code <= 77:
        return "é›ª"
    elif 80 <= code <= 86:
        return "ã«ã‚ã‹é›¨ãƒ»é›ª"
    elif 95 <= code <= 99:
        return "é›·é›¨"
    else:
        return "ãã®ä»–"


# ãƒ†ã‚¹ãƒˆç”¨é–¢æ•°
def test_weather_codes():
    """WMOå¤©æ°—ã‚³ãƒ¼ãƒ‰å¤‰æ›ã®ãƒ†ã‚¹ãƒˆ"""
    test_codes = [0, 1, 2, 3, 45, 53, 63, 73, 80, 95, 999]
    
    print("=== WMOå¤©æ°—ã‚³ãƒ¼ãƒ‰å¤‰æ›ãƒ†ã‚¹ãƒˆ ===")
    for code in test_codes:
        desc = get_weather_description(code)
        simple_desc = get_weather_description(code, simple=True)
        icon = get_weather_icon(code)
        category = get_weather_category(code)
        
        print(f"ã‚³ãƒ¼ãƒ‰ {code:2d}: {desc} / ç°¡æ˜“: {simple_desc} / ã‚¢ã‚¤ã‚³ãƒ³: {icon} / ã‚«ãƒ†ã‚´ãƒª: {category}")


if __name__ == "__main__":
    test_weather_codes()